webpackJsonp([9],{Lm7O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=[],s=240,n=Math.PI/180,i=600,c=[],r=!1,h=1,l=1,f=!0,u=20,d=300,p=0,v=0,m=1,w=null,M=null,g=null,y=null,j=null,x=null,D=null,C=null,_=null;function z(t,e,a){g=Math.sin(t*n),y=Math.cos(t*n),j=Math.sin(e*n),x=Math.cos(e*n),D=Math.sin(a*n),C=Math.cos(a*n)}var b={series:[{type:"wordCloud",gridSize:10,sizeRange:[30,150],shape:"arc",drawOutOfBound:!0,textStyle:{normal:{color:function(){return"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")"}},emphasis:{shadowBlur:10,shadowColor:"#20b6fb"}},data:[]}]};setInterval(function(){var t,e;if(!(o.length<1||(r?(t=-Math.min(Math.max(-v,-d),d)/s*u,e=Math.min(Math.max(-p,-d),d)/s*u):(t=.98*h,e=.98*l),h=t,l=e,Math.abs(t)<=.01&&Math.abs(e)<=.01))){z(t,e,0);for(var a=0;a<c.length;a++){var n=c[a].cx,f=c[a].cy*y+c[a].cz*-g,b=c[a].cy*g+c[a].cz*y,$=n*x+b*j,I=$*C+f*-D,H=$*D+f*C,W=n*-j+b*x;c[a].cx=I,c[a].cy=H,c[a].cz=W,_=i/(i+W),c[a].x=m*I*_-2*m,c[a].y=H*_,c[a].scale=_,c[a].alpha=_,c[a].alpha=(c[a].alpha-.6)*(10/6)}!function(){for(var t=M.offsetWidth/2,e=M.offsetHeight/2,a=0;a<c.length;a++)o[a].style.left=c[a].cx+t-c[a].offsetWidth/2+"px",o[a].style.top=c[a].cy+e-c[a].offsetHeight/2+"px",o[a].style.filter="alpha(opacity="+100*c[a].alpha+")",o[a].style.opacity=c[a].alpha}(),function(){var t=0,e=[];for(t=0;t<w.length;t++)e.push(w[t]);for(e.sort(function(t,e){return t.cz>e.cz?-1:t.cz<e.cz?1:0}),t=0;t<e.length;t++)e[t].style.zIndex=t}()}},30);var $={name:"projectVoice",data:function(){return{show3D:!0,data:[]}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},created:function(){this.fetchData()},watch:{$route:"fetchData",show3D:"init"},methods:{fetchData:function(){var t=this;this.$store.dispatch("wordSearch",{id:this.$route.params.projectId}).then(function(e){b.series[0].data=e;for(var a=[],o=0,s=e.length;o<s;o++)a.push({name:e[o].name,value:e[o].value,style:{color:"rgb("+[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())].join(",")+")",fontSize:2*e[o].value+"px",filter:"",opacity:""}});t.data=a,t.init()},function(t){console.log(t)})},init:function(){var t=this;this.show3D?this.$nextTick(function(){var e=null;M=t.$el.getElementsByClassName("project-word-3D")[0],w=M.getElementsByClassName("project-word-3D-text"),o=t.data,c=[];for(var a=0;a<w.length;a++)(e={}).offsetWidth=w[a].offsetWidth,e.offsetHeight=w[a].offsetHeight,c.push(e);z(0,0,0),function(){var t=0,e=0,a=c.length,n=0,i=[],r=document.createDocumentFragment();for(n=0;n<w.length;n++)i.push(w[n]);for(i.sort(function(){return Math.random()<.5?1:-1}),n=0;n<i.length;n++)r.appendChild(i[n]);for(M.appendChild(r),n=1;n<a+1;n++)f?(t=Math.acos((2*n-1)/a-1),e=Math.sqrt(a*Math.PI)*t):(t=Math.random()*Math.PI,e=Math.random()*(2*Math.PI)),c[n-1].cx=s*Math.cos(e)*Math.sin(t),c[n-1].cy=s*Math.sin(e)*Math.sin(t),c[n-1].cz=s*Math.cos(t),o[n-1].style.left=c[n-1].cx+M.offsetWidth/2-c[n-1].offsetWidth/2+"px",o[n-1].style.top=c[n-1].cy+M.offsetHeight/2-c[n-1].offsetHeight/2+"px"}(),r=!0,p=10,v=10}):this.$nextTick(function(){var e=echarts.init(t.$el.getElementsByClassName("project-chart")[0]);e.clear(),e.setOption(b)})},move:function(t){var e=window.event||t;p=e.clientX-(M.offsetLeft+M.offsetWidth/2),v=e.clientY-(M.offsetTop+M.offsetHeight/2),p/=5,v/=5}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("project-header",{attrs:{projectId:this.$route.params.projectId,activeName:"热评"}}),t._v(" "),a("div",{staticClass:"project-show",staticStyle:{"padding-bottom":"0px"}},[t._e(),t._v(" "),a("div",{staticClass:"project-search project-search-absolute"},[a("div",{staticClass:"project-switch-table"},[a("div",{staticClass:"project-switch-common project-switch-left ",class:{"project-switch-active":!t.show3D},on:{click:function(e){t.show3D=!t.show3D}}},[t._v("2D")]),t._v(" "),a("div",{staticClass:"project-switch-common project-switch-right",class:{"project-switch-active":t.show3D},on:{click:function(e){t.show3D=!t.show3D}}},[t._v("3D")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show3D,expression:"show3D"}],staticClass:"project-word-3D",on:{mousemove:t.move}},[t._l(t.data,function(e){return[a("div",{staticClass:"project-word-3D-text",style:e.style,attrs:{href:"#"}},[t._v(t._s(e.name))])]})],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.show3D,expression:"!show3D"}],staticClass:"project-chart"})])],1)},staticRenderFns:[]};var H=a("Z0/y")($,I,!1,function(t){a("u4VJ")},null,null);e.default=H.exports},u4VJ:function(t,e){}});