webpackJsonp([12],{"Nv7+":function(e,t){},XjR3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{form:{name:"",status:"",start:"",end:"",source:["1","2","3","4"],keyWords:"",desc:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],start:[{required:!0,message:"请选择开始日期"}],end:[{required:!0,message:"请选择结束日期"}],source:[{type:"array",required:!0,message:"请至少选择一个信息源",trigger:"change"}],keyWords:[{required:!0,message:"请填写关键词",trigger:"blur"}],desc:[{required:!0,message:"请填写项目说明",trigger:"blur"}]}}},mounted:function(){this.updateData()},watch:{$route:"updateData"},methods:{updateData:function(){var e=this.$store.getters.getProjectById(this.$route.params.projectId);this.form.name=e.name,this.form.status={0:"拒绝",1:"提交",2:"接受",3:"分析",4:"完成"}[e.status]||"未知",this.form.brand=e.brand,this.form.goods=e.goods,this.form.start=e.start,this.form.end=e.end,this.form.source=e.source.split("+"),this.form.desc=e.desc,this.form.keyWords=e.keyWords},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r.$store.dispatch("editProject",{project_name:r.form.name,project_brand:r.form.brand,project_product:r.form.goods,project_info:r.form.desc,project_key_words:r.form.keyWords,project_source:r.form.source.join("+"),start_time:r.form.start,end_time:r.form.end,project_id:t.$route.params.projectId}).then(function(){alert("修改成功")},function(e){console.log(e),alert("修改失败")})})},resetForm:function(e){this.$refs[e].resetFields()},getDescFromBaidu:function(){var e=this;e.$store.dispatch("getDescFromBaidu",{project_brand:e.form.brand,project_product:e.form.goods}).then(function(t){console.log(t),e.form.desc=t.data},function(e){console.log(error)})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("project-header",{attrs:{projectId:this.$route.params.projectId,activeName:"项目编辑"}}),e._v(" "),r("div",{staticClass:"project-show"},[r("el-form",{ref:"form",staticClass:"project-search",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目状态",prop:"status"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"时间",required:""}},[r("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"start"}},[r("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"timestamp",placeholder:"开始日期"},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),e._v(" "),r("div",{staticClass:"el-input",staticStyle:{width:"auto"}},[e._v("至")]),e._v(" "),r("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"end"}},[r("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"timestamp",placeholder:"结束日期"},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"信息源",prop:"source"}},[r("el-checkbox-group",{model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},[r("el-checkbox",{attrs:{label:"1",name:"source"}},[e._v("微博")]),e._v(" "),r("el-checkbox",{attrs:{label:"2",name:"source"}},[e._v("京东达人")]),e._v(" "),r("el-checkbox",{attrs:{label:"3",name:"source"}},[e._v("京东商城")]),e._v(" "),r("el-checkbox",{attrs:{label:"4",name:"source"}},[e._v("天猫")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"关键词",prop:"keyWords"}},[r("el-input",{model:{value:e.form.keyWords,callback:function(t){e.$set(e.form,"keyWords",t)},expression:"form.keyWords"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var a=r("Z0/y")(o,s,!1,function(e){r("Nv7+")},null,null);t.default=a.exports}});